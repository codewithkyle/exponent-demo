{% extends "_base/page" %}

{% if entry.slug == settings.homepageEntry[0].slug and siteUrl != craft.app.request.absoluteUrl %}
    {% redirect siteUrl %}
{% endif %}

{% if not craft.app.request.isLivePreview %}
    {% do eagerLoadElements(entry, [
        'heroArea',
        'heroArea.homepageHeroCarousel',
        'heroArea.homepageHeroCarousel:image',
        'heroArea.heroImage',
        'contentMatrix',
        'contentMatrix.ctaGrid',
        'contentMatrix.ctaGrid:cards',
        'contentMatrix.ctaGrid:cards.icon',
        'contentMatrix.ctaCards',
        'contentMatrix.ctaCards:cards',
        'contentMatrix.ctaCards:cards.image'
    ]) %}
{% endif %}

{% set data = {
    'hero': entry.heroArea[0],
    'sections': entry.contentMatrix,
} %}

{% block content %}
    <article style="display:block;width:100%;">
        {% include "_heros/" ~ data.hero.type %}
        {% for section in data.sections %}
            {% include "_blocks/" ~ section.type|kebab %}
        {% endfor %}
    </article>
{% endblock %}
